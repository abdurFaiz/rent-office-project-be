[build]
builder = "nixpacks"
buildCommand = "composer install --no-interaction --no-dev --prefer-dist && php artisan config:cache && php artisan optimize:clear && php artisan cache:clear"

[deploy]
startCommand = "php artisan serve --host=0.0.0.0 --port=$PORT"
healthcheckPath = "/up"
healthcheckTimeout = 100
restartPolicyType = "on_failure"

[[services]]
internal_port = 8000
protocol = "tcp"

  [[services.ports]]
  handlers = ["http"]
  port = 80

  [[services.ports]]
  handlers = ["tls", "http"]
  port = 443 